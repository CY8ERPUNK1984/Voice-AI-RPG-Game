# Обнаруженные проблемы

При изучении репозитория выявлены следующие моменты, которые могут препятствовать нормальной работе проекта.

## 1. Несоответствие переменных окружения для WebSocket

В коде фронтенда переменная называется `VITE_SOCKET_URL` и используется при инициализации `ConnectionManager` (строки 140‑147 в `frontend/src/App.tsx`). В примере `.env` для фронтенда прописана другая переменная — `VITE_WS_URL` (строки 1‑4 в `frontend/.env.example`). Если разработчик копирует пример без изменений, WebSocket URL не попадает в сборку, что затрудняет соединение.

## 2. Неустановленные зависимости и невозможность запуска тестов

Попытка выполнить `npm run test` завершается ошибкой `vitest: not found` (см. лог). Отсутствуют каталоги `node_modules`, поэтому ни фронтенд, ни бэкенд тесты не запускаются. Это также мешает проверить работоспособность кода и покрытие тестами.

## 3. Использование локальных данных вместо API

`StoryService` на фронтенде загружает данные из локального JSON (`frontend/src/data/stories.json`), тогда как на бэкенде предусмотрены эндпоинты `/api/stories` и `/api/stories/:id`. Пользователь может ожидать, что список историй берётся с сервера. Расхождение может приводить к разной логике на клиенте и сервере.

## 4. Зависимость от конфигурации OpenAI

Бэкендские сервисы `OpenAILLM`, `WhisperASR` и `OpenAITTS` требуют переменной `OPENAI_API_KEY`. При её отсутствии сервер не сможет отвечать на запросы. В документации ключ упоминается, но его наличие часто упускают при настройке.

## 5. Отсутствие явного использования `VITE_API_BASE_URL`

Хотя в конфигурации `.env` указана переменная `VITE_API_BASE_URL`, в коде обращение к REST‑эндпоинтам происходит через относительные пути (`/api/...`). В режиме разработки это работает благодаря proxy Vite, однако при раздельном деплое фронтенда и бэкенда может потребоваться полный URL.
